<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src\Gradiate.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">src/</a> Gradiate.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">24.14% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>14/58</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">6.45% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>2/31</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">7.69% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>1/13</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">24.14% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>14/58</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * Gradiate Module
 * by Roland Coops
 *
 * Quick Usage example (try in console):
 * Gradiate.get(5, ['#46b1d9', '#64cf54', '#ffd544']).hex;
 */
&nbsp;
&nbsp;
var Gradiate = ( function GradiateModule( publicAPI ) {
&nbsp;
	"use strict";
&nbsp;
	const fallbackRgb = [0, 0, 0];
&nbsp;
	const delimRgbPatt = /(\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3})/;
	const hex3Patt = /^#?([0-9a-f]{3})$/i;
	const hex6Patt = /^#?([0-9a-f]{6})$/i;
&nbsp;
&nbsp;
	// Local scope Number.isInteger() polyfill (from MDN)
<span class="fstat-no" title="function not covered" >	function isInteger( v ) {</span>
<span class="cstat-no" title="statement not covered" >		return ( typeof v === 'number' &amp;&amp; isFinite( v ) &amp;&amp; Math.floor( v ) === v );</span>
	}
&nbsp;
	// Limit RGB channel value to 0 &gt;= v &lt;= 255
<span class="fstat-no" title="function not covered" >	function limitChannel( channel )</span>
	{
		// If channel can be coerced to an int, return range-limited number, else, 'silent fail' to 0
<span class="cstat-no" title="statement not covered" >		const channelInt = parseInt( channel, 10 );</span>
<span class="cstat-no" title="statement not covered" >		return ( isInteger( channelInt ) )</span>
			? Math.min( Math.max( channelInt, 0 ), 255 )
			: 0;
	}
&nbsp;
&nbsp;
<span class="fstat-no" title="function not covered" >	function hexToRgb( hexCode )</span>
	{
<span class="cstat-no" title="statement not covered" >		const formatFn = <span class="fstat-no" title="function not covered" >function( value ) {</span></span>
<span class="cstat-no" title="statement not covered" >			value = value.replace( /[^0-9a-f]/gi, '' );</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >			if ( hex3Patt.test( value ) )</span>
			{
<span class="cstat-no" title="statement not covered" >				value = '' + value[0] + value[0] + value[1] + value[1] + value[2] + value[2];</span>
			}
&nbsp;
<span class="cstat-no" title="statement not covered" >			return value;</span>
		};
&nbsp;
<span class="cstat-no" title="statement not covered" >		const parseFn = <span class="fstat-no" title="function not covered" >function( value ) {</span></span>
<span class="cstat-no" title="statement not covered" >			return parseInt( value, 16 );</span>
		}
&nbsp;
		// format &amp; validate hexCode
<span class="cstat-no" title="statement not covered" >		hexCode = formatFn( hexCode );</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >		return [</span>
			parseFn( hexCode.substr( 0, 2 ) ),
			parseFn( hexCode.substr( 2, 2 ) ),
			parseFn( hexCode.substr( 4, 2 ) )
		];
	}
&nbsp;
&nbsp;
	// convert [r, g, b] array to hexcode string
<span class="fstat-no" title="function not covered" >	function rgbToHex( arr )</span>
	{
<span class="cstat-no" title="statement not covered" >		const parseFn = <span class="fstat-no" title="function not covered" >function( value ) {</span></span>
<span class="cstat-no" title="statement not covered" >			const str = value.toString( 16 );</span>
<span class="cstat-no" title="statement not covered" >			return ( str.length === 1 )</span>
				? '0' + str
				: str;
		};
&nbsp;
<span class="cstat-no" title="statement not covered" >		return "#" + parseFn( arr[0] ) + parseFn( arr[1] ) + parseFn( arr[2] );</span>
	}
&nbsp;
&nbsp;
	// joining function for use by Array.map()
<span class="fstat-no" title="function not covered" >	function delimitRgb( arr )</span>
	{
<span class="cstat-no" title="statement not covered" >		return arr.join();</span>
	}
&nbsp;
&nbsp;
	// parse comma separated RGB string to [r, g, b] array
<span class="fstat-no" title="function not covered" >	function relimitRgb( str )</span>
	{
<span class="cstat-no" title="statement not covered" >		const splitStr = delimRgbPatt.exec( str );</span>
<span class="cstat-no" title="statement not covered" >		return splitStr.slice( 1 );</span>
	}
&nbsp;
&nbsp;
<span class="fstat-no" title="function not covered" >	function getPalette( count, arr )</span>
	{
<span class="cstat-no" title="statement not covered" >		let palette = [];</span>
&nbsp;
		// calculate step translation between input &amp; output arrays
<span class="cstat-no" title="statement not covered" >	    let step = ( arr.length - 1 ) / ( count - 1 );</span>
<span class="cstat-no" title="statement not covered" >	        step = ( isFinite( step ) )</span>
				? step
				: ( arr.length - 1 ); // check to catch divide by 0
&nbsp;
<span class="cstat-no" title="statement not covered" >		for( let i=0; i&lt;count; i++ )</span>
	    {
	        // variable for index translation between count an input arr length
<span class="cstat-no" title="statement not covered" >	        let interpolate = i * step;</span>
&nbsp;
			// calculate index in arr[] before and after index point in palette[i]
	        // floor/ceil automatically prevents min or max breakpoints from getting out of bound.
<span class="cstat-no" title="statement not covered" >	        let pre = Math.floor(interpolate);</span>
<span class="cstat-no" title="statement not covered" >	        let post = Math.ceil(interpolate);</span>
&nbsp;
	        // calculate relative position between before and after index of arr[] (will be a decimal leftover)
<span class="cstat-no" title="statement not covered" >	        let position = interpolate - pre;</span>
&nbsp;
			// push new r,g,b arr to output palette arr
<span class="cstat-no" title="statement not covered" >	        palette.push([</span>
				parseInt( arr[pre][0] + ( arr[post][0] - arr[pre][0] ) * position, 10 ),
				parseInt( arr[pre][1] + ( arr[post][1] - arr[pre][1] ) * position, 10 ),
				parseInt( arr[pre][2] + ( arr[post][2] - arr[pre][2] ) * position, 10 )
	        ]);
	    }
&nbsp;
<span class="cstat-no" title="statement not covered" >		return palette;</span>
	}
&nbsp;
&nbsp;
	publicAPI.get = <span class="fstat-no" title="function not covered" >function( count, input ) {</span>
<span class="cstat-no" title="statement not covered" >		let valid = false; </span>// if input is invalid or contains invalid data, resort to fallback value
<span class="cstat-no" title="statement not covered" >		let parseInput;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >		if( Array.isArray( input ) &amp;&amp; input.length &gt; 0 ) {</span>
			// input is an arr, assume input is valid until proven otherwise in input.map( fn )
<span class="cstat-no" title="statement not covered" >			valid = true;</span>
&nbsp;
			// parse input parameter to [ [num, num, num] ] to make it predictable
<span class="cstat-no" title="statement not covered" >			parseInput = input.map( <span class="fstat-no" title="function not covered" >function( o ) {</span></span>
&nbsp;
<span class="cstat-no" title="statement not covered" >				if( typeof o === 'string')</span>
				{
<span class="cstat-no" title="statement not covered" >					if( o.match( hex6Patt ) || o.match( hex3Patt ) )</span>
					{
<span class="cstat-no" title="statement not covered" >						return hexToRgb( o ).map( limitChannel );</span>
					}
					else <span class="cstat-no" title="statement not covered" >if( o.match( delimRgbPatt ) )</span>
					{
<span class="cstat-no" title="statement not covered" >						return relimitRgb( o ).map( limitChannel );</span>
					}
				}
				else <span class="cstat-no" title="statement not covered" >if( Array.isArray( o ) &amp;&amp; o.length === 3 )</span>
				{
<span class="cstat-no" title="statement not covered" >					return o.map( limitChannel );</span>
				}
&nbsp;
				// set to false again if we find a value that doesn't match expected types/format
<span class="cstat-no" title="statement not covered" >				valid = false;</span>
			});
		}
&nbsp;
		// if invalid, return palette of fallback rgb values
<span class="cstat-no" title="statement not covered" >		let palette = ( valid )</span>
			? getPalette( count, parseInput )
			: getPalette( count, [fallbackRgb] );
&nbsp;
<span class="cstat-no" title="statement not covered" >		return {</span>
			rgb: 		palette,
			rgbCsv: 	palette.map( delimitRgb ),
			hex: 		palette.map( rgbToHex )
		};
	};
&nbsp;
&nbsp;
	return publicAPI;
&nbsp;
}( Gradiate || {} ) );
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Wed Nov 30 2016 17:37:18 GMT+0100 (W. Europe Standard Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
